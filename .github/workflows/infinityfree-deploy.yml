name: Deploy to InfinityFree via FTP

on:
  push:
    branches:
      - main          # ‚Üê change to your branch if different (e.g. master)
  workflow_dispatch:    # ‚Üê allows manual trigger from GitHub UI

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      - name: üì• Get latest code
        uses: actions/checkout@v4

      # Optional: If your project needs building (e.g. React, Vue, Next.js, etc.)
      # Uncomment and adjust as needed
      # - name: üîß Setup Node.js
      #   uses: actions/setup-node@v4
      #   with:
      #     node-version: '20'
      #
      # - name: üì¶ Install dependencies
      #   run: npm install
      #
      # - name: üõ† Build project
      #   run: npm run build
      #
      # Then change local-dir below to: ./dist/ or ./build/ or wherever your built files end up

      - name: üîÑ Sync files to InfinityFree via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.6
        with:
          server:       ${{ secrets.FTP_SERVER }}       # ‚Üê this was missing/wrong name before
          username:     ${{ secrets.FTP_USERNAME }}
          password:     ${{ secrets.FTP_PASSWORD }}
          port:         21                              # default for plain FTP
          protocol:     ftp                             # use 'ftps' if your host supports explicit FTPS
          local-dir:    ./                              # ‚Üê folder to upload FROM (current repo root)
                                                        #   change to ./dist/ or ./public/ if you build first
          server-dir:   /htdocs/                        # ‚Üê common InfinityFree remote path
                                                        #   or /public_html/ ‚Äî check your control panel
          exclude:      |
            **/.git*
            **/.github/**
            **/node_modules/**
            **/.env
            **/README.md
            **/*.log
          log-level:    standard                        # or verbose for more debug info
